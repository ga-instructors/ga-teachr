<p id="notice"><%= notice %></p>

<div class="medium container" style="position: relative;">
  <div style="position: absolute; width: 100%;">
    <svg style="width: 100%; height: 300px;">
      <g transform="rotate(90 0 0)">
        <% @survey_question.answers.select("survey_answers.*, survey_evaluations.value").joins(:evaluations).order('survey_evaluations.value DESC').each_with_index do |answer, i| %>
          <rect x="0" y="<%= i * -30 - 30 %>" width="<%= answer.value * 200 %>" height="30" fill="#EEEEEE" fill-opacity="0.75"></rect>
          <text fill="#555555" x="10" y="<%= -30 * i - 8 %>" text-anchor="left"><%= answer.response.student.first_name %></text>
        <% end %>
      </g>
    </svg>
  </div>
  <div style="width: 33%; margin: 5px auto; padding-top: 3rem;"><%= react_component 'RadialProgress', progress: 0 %></div>


  <div style="float:right;">
    <%= link_to 'View All', survey_questionnaire_questions_path(@survey_question.questionnaire) %>
    <% if @previous_question %>
      &nbsp;|&nbsp;
      <%= link_to "Previous", survey_questionnaire_question_path(@questionnaire, @previous_question) %>
    <% end %>
    <% if @next_question %>
      &nbsp;|&nbsp;
      <%= link_to "Next", survey_questionnaire_question_path(@questionnaire, @next_question) %>
    <% end %>
  </div>
  <h4>Q<%= @survey_question.ordinal %>.</h4>

  <hr style="clear: both;">

  <%= @survey_question.prompt_html %>
  <ul style="list-style-type: circle;">
    <% @survey_question.options.each do |option| %>
      <li><%= option.label %></li>
    <% end %>
  </ul>

  <p>
    <strong>Topics:</strong>
    <%= @survey_question.topics.map(&:name).to_sentence %>
  </p>

  <% @survey_question.answers.select("survey_answers.*, survey_evaluations.value").joins(:evaluations).order('survey_evaluations.value DESC').each do |answer| %>
    <%= render answer %>
  <% end %>

</div>
